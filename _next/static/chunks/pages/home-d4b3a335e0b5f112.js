(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[229],{7183:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/home",function(){return s(3552)}])},3552:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return D}});var n=s(5893),o=s(9008),a=s.n(o),i=s(1664),r=s.n(i),c=s(6750),l=s.n(c),d=s(5669),m=s(7294);let _=(0,m.createContext)(null);function h(e){let{children:t}=e,[s,o]=(0,m.useState)({_id:"",name:"",profilePicture:""}),{user:a}=(0,d.Eu)();return(0,m.useEffect)(()=>{let e=async()=>{try{let e=await fetch("".concat("http://localhost:9000","/api/user/list/").concat(null==a?void 0:a._id),{headers:{Authorization:"Bearer ".concat(null==a?void 0:a.token)}}),t=await e.json();e.ok&&o(t)}catch(e){e instanceof Error&&console.log(e.message),console.log("Server is starting. Please wait about 20 seconds.")}};a&&e()},[a]),(0,n.jsx)(_.Provider,{value:{myInfo:s},children:t})}let u=()=>{let e=(0,m.useContext)(_);if(!e)throw Error("useUserContext must be used inside the Auth Provider");return e};var p=s(7106),x=s(1872);function j(){let{logout:e}=(0,d.aU)(),{myInfo:t}=u(),[s,o]=(0,m.useState)(!1),a=()=>{e()};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:l().header,children:[(0,n.jsx)("h1",{children:(0,n.jsx)(r(),{href:"/home",children:"feedbook"})}),(0,n.jsx)("input",{placeholder:"Search Feedbook"}),(0,n.jsx)("div",{className:l().portrait_menu,onClick:()=>o(e=>!e),children:(0,n.jsx)("img",{className:l().pfp,src:s?"https://img.icons8.com/pastel-glyph/128/null/cancel--v1.png":t.profilePicture,alt:"pfp"})})]}),(0,n.jsx)("div",{className:"".concat(l().parent_dropdown," ").concat(s?l().dropdown_active:""),children:(0,n.jsxs)("div",{className:l().dropdown,children:[(0,n.jsxs)("div",{className:l().nav_name,children:[(0,n.jsx)("img",{className:l().pfp,src:t.profilePicture,alt:"pfp"}),(0,n.jsx)("div",{children:t.name})]}),(0,n.jsxs)("div",{className:l().nav_item,children:[(0,n.jsx)(x.cKh,{size:30}),"Change Name"]}),(0,n.jsxs)("div",{className:l().nav_item,children:[(0,n.jsx)(x.sHo,{size:30}),"Change Picture"]}),(0,n.jsxs)("div",{className:l().nav_item,onClick:a,children:[(0,n.jsx)(p.VUx,{size:30}),"Logout"]})]})})]})}var f=s(9615),g=s.n(f);function v(e){let{children:t}=e;return(0,n.jsx)("div",{className:g().home,children:(0,n.jsxs)(h,{children:[(0,n.jsx)(j,{}),t]})})}var b=s(4600),N=s.n(b),k=s(9583),w=s(7735);function y(){return(0,n.jsxs)("div",{className:N().nav,children:[(0,n.jsx)("div",{className:N().nav_item,children:(0,n.jsxs)(r(),{href:"/",children:[(0,n.jsx)(k.xng,{size:25}),"Home"]})}),(0,n.jsx)("div",{className:N().nav_item,children:(0,n.jsxs)("a",{href:"https://www.youtube.com/",children:[(0,n.jsx)(k.V2E,{size:25}),"YouTube"]})}),(0,n.jsx)("div",{className:N().nav_item,children:(0,n.jsxs)("a",{href:"https://www.google.com/",children:[(0,n.jsx)(k.ldW,{size:25}),"Google"]})}),(0,n.jsx)("div",{className:N().nav_item,children:(0,n.jsxs)("a",{href:"https://www.amazon.com/",children:[(0,n.jsx)(k.UpG,{size:25}),"Amazon"]})}),(0,n.jsx)("div",{className:N().nav_item,children:(0,n.jsxs)("a",{href:"https://www.facebook.com/",children:[(0,n.jsx)(k.Am9,{size:25}),"Facebook"]})}),(0,n.jsx)("div",{className:N().nav_item,children:(0,n.jsxs)("a",{href:"https://www.instagram.com/",children:[(0,n.jsx)(k.Zf_,{size:25}),"Instagram"]})}),(0,n.jsx)("div",{className:N().nav_item,children:(0,n.jsxs)("a",{href:"https://nodejs.org/en/docs/",children:[(0,n.jsx)(k.jPo,{size:25}),"Node Docs"]})}),(0,n.jsx)("div",{className:N().nav_item,children:(0,n.jsxs)("a",{href:"https://reactjs.org/",children:[(0,n.jsx)(k.huN,{size:25}),"React Docs"]})}),(0,n.jsx)("div",{className:N().nav_item,children:(0,n.jsxs)("a",{href:"https://expressjs.com/",children:[(0,n.jsx)(w.AmJ,{size:25}),"Express Docs"]})}),(0,n.jsx)("div",{className:N().nav_item,children:(0,n.jsxs)("a",{href:"https://www.mongodb.com/docs/",children:[(0,n.jsx)(w.t$b,{size:25}),"MongoDB Docs"]})}),(0,n.jsx)("div",{className:N().nav_item,children:(0,n.jsxs)("a",{href:"https://github.com/jyu-1",children:[(0,n.jsx)(k.hJX,{size:25}),"\xa9 2023 Nateyu"]})})]})}var P=s(3335),z=s.n(P),C=s(5089);function E(e){let{post:t,setPost:s}=e,{user:o}=(0,d.Eu)(),a=(0,m.useRef)(null),i=(0,m.useRef)(null),[r,c]=(0,m.useState)(!1),[l,_]=(0,m.useState)(!1),[h,p]=(0,m.useState)(!1),{myInfo:j}=u(),f=async()=>{if(!o){console.log("You are not logged in");return}try{let e=await fetch("".concat("http://localhost:9000","/api/post/like"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(null==o?void 0:o.token)},body:JSON.stringify({postId:t._id})}),n=await e.json();e.ok||console.log(n.error),e.ok&&s(e=>e.map(e=>e._id===t._id?{...e,userLiked:1,likeCount:e.likeCount+1}:e))}catch(e){e instanceof Error&&console.log(e.message),console.log("Server is starting. Please wait about 20 seconds.")}},g=async()=>{if(!o){console.log("You are not logged in");return}try{let e=await fetch("".concat("http://localhost:9000","/api/post/like/").concat(t._id),{method:"DELETE",headers:{Authorization:"Bearer ".concat(null==o?void 0:o.token)}}),n=await e.json();e.ok||console.log(n.error),e.ok&&s(e=>e.map(e=>e._id===t._id?{...e,userLiked:0,likeCount:e.likeCount-1}:e))}catch(e){e instanceof Error&&console.log(e.message),console.log("Server is starting. Please wait about 20 seconds.")}},v=async()=>{if(!o){console.log("You are not logged in");return}try{let e=await fetch("".concat("http://localhost:9000","/api/comment"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(null==o?void 0:o.token)},body:JSON.stringify({postId:t._id,message:i.current?i.current.value:t.message})}),n=await e.json();e.ok||console.log(n.error),e.ok&&(i.current&&(i.current.value=""),s(e=>e.map(e=>e._id===t._id?{...e,comments:[{...n,createdBy:{_id:j._id,name:j.name,profilePicture:j.profilePicture}},...e.comments],commentCount:e.commentCount+1}:e)))}catch(e){e instanceof Error&&console.log(e.message),console.log("Server is starting. Please wait about 20 seconds.")}},b=async()=>{if(!o){console.log("You are not logged in");return}try{let e=await fetch("".concat("http://localhost:9000","/api/post/").concat(t._id),{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(null==o?void 0:o.token)},body:JSON.stringify({message:a.current?a.current.value:t.message})}),n=await e.json();e.ok||(console.log(n.error),c(!1)),e.ok&&(c(!1),s(e=>e.map(e=>e._id===t._id?{...e,message:a.current?a.current.value:t.message}:e)))}catch(e){e instanceof Error&&console.log(e.message),console.log("Server is starting. Please wait about 20 seconds."),c(!1)}},N=async()=>{if(!o){console.log("You are not logged in");return}try{let e=await fetch("".concat("http://localhost:9000","/api/post/").concat(t._id),{method:"DELETE",headers:{Authorization:"Bearer ".concat(null==o?void 0:o.token)}}),n=await e.json();e.ok||console.log(n.error),e.ok&&s(e=>e.filter(e=>e._id!==t._id))}catch(e){e instanceof Error&&console.log(e.message),console.log("Server is starting. Please wait about 20 seconds.")}};return(0,n.jsxs)("div",{className:z().list_post,children:[(0,n.jsxs)("div",{className:z().info,children:[(0,n.jsx)("img",{className:z().pfp,src:t.createdBy.profilePicture,alt:"pfp"}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:z().name,children:t.createdBy.name}),(0,n.jsx)("div",{className:z().date,children:(0,C.Z)(new Date(t.updatedAt),{addSuffix:!0})})]})]}),r?(0,n.jsxs)("div",{className:z().edit_bar,children:[(0,n.jsx)("textarea",{defaultValue:t.message,name:"message",placeholder:"Edit message",minLength:1,maxLength:500,required:!0,ref:a}),(0,n.jsxs)("button",{onClick:b,children:[(0,n.jsx)(x.omL,{size:20}),"Done"]})]}):(0,n.jsx)("div",{className:z().message,children:t.message}),t.uploadImage&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:z().photo,children:"Photo"}),(0,n.jsx)("hr",{})]}),(0,n.jsxs)("div",{className:z().stats,children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(x.b8C,{})," ",t.likeCount]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(k.QRJ,{})," ",t.commentCount]})]}),(0,n.jsx)("hr",{}),(0,n.jsxs)("div",{className:z().like_comment_buttons,children:[0===t.userLiked?(0,n.jsxs)("button",{className:z().unlike_button,onClick:f,children:[(0,n.jsx)(x.K_P,{size:25}),"Like"]}):(0,n.jsxs)("button",{className:z().liked_button,onClick:g,children:[(0,n.jsx)(x.b8C,{size:25}),"Like"]}),h?(0,n.jsxs)("button",{className:z().comment_button,onClick:()=>p(e=>!e),children:[(0,n.jsx)(k.diV,{size:20}),"Comment"]}):(0,n.jsxs)("button",{onClick:()=>p(e=>!e),children:[(0,n.jsx)(k.QRJ,{size:20}),"Comment"]}),j._id===t.createdBy._id&&(0,n.jsxs)(n.Fragment,{children:[r?(0,n.jsxs)("button",{className:z().update_button,onClick:()=>c(!1),children:[(0,n.jsx)(x.omL,{size:25}),"Cancel"]}):(0,n.jsxs)("button",{onClick:()=>c(!0),children:[(0,n.jsx)(x.omL,{size:25}),"Edit"]}),l?(0,n.jsxs)("button",{className:z().delete_confirm,onClick:N,children:[(0,n.jsx)(x.HLd,{size:25}),"Confirm"]}):(0,n.jsxs)("button",{onClick:()=>_(!0),children:[(0,n.jsx)(x.aTj,{size:25}),"Delete"]})]})]}),h&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("hr",{className:z().comment_hr}),t.comments&&t.comments.slice(0).reverse().map(e=>(0,n.jsxs)("div",{className:z().comment,children:[(0,n.jsx)("img",{className:z().pfp,src:e.createdBy.profilePicture,alt:"pfp"}),(0,n.jsxs)("div",{className:z().comment_right,children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:z().name,children:e.createdBy.name})," ",(0,n.jsx)("span",{className:z().date,children:(0,C.Z)(new Date(e.updatedAt),{addSuffix:!0})})]}),(0,n.jsx)("div",{children:e.message})]})]},e._id)),(0,n.jsxs)("div",{className:z().post_comment,children:[(0,n.jsx)("img",{className:z().pfp,src:j.profilePicture,alt:"pfp"}),(0,n.jsx)("input",{type:"text",name:"message",minLength:1,maxLength:250,required:!0,ref:i,placeholder:"Write a comment..."}),(0,n.jsx)("button",{onClick:v,children:(0,n.jsx)(x.omL,{size:30})})]})]})]})}function S(){let[e,t]=(0,m.useState)([]),[s,o]=(0,m.useState)(!1),{user:a}=(0,d.Eu)(),{myInfo:i}=u(),r=async e=>{if(e.preventDefault(),!a){console.log("You are not logged in");return}o(!0);try{let s=await fetch("".concat("http://localhost:9000","/api/post"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(null==a?void 0:a.token)},body:JSON.stringify({message:e.target.message.value})}),n=await s.json();s.ok||(console.log(n.error),o(!1)),s.ok&&(t(e=>[{...n,createdBy:{_id:i._id,name:i.name,profilePicture:i.profilePicture}},...e]),o(!1),e.target.reset())}catch(e){e instanceof Error&&console.log(e.message),console.log("Server is starting. Please wait about 20 seconds."),o(!1)}};return(0,m.useEffect)(()=>{let e=async()=>{try{let e=await fetch("".concat("http://localhost:9000","/api/post"),{headers:{Authorization:"Bearer ".concat(null==a?void 0:a.token)}}),s=await e.json();e.ok&&t(s)}catch(e){e instanceof Error&&console.log(e.message),console.log("Server is starting. Please wait about 20 seconds.")}};a&&e()},[a]),(0,n.jsxs)("div",{className:z().post_container,children:[(0,n.jsxs)("form",{className:z().create_post,onSubmit:r,children:[(0,n.jsxs)("div",{className:z().post_input,children:[(0,n.jsx)("img",{className:z().pfp,src:i.profilePicture,alt:"pfp"}),(0,n.jsx)("input",{type:"text",name:"message",placeholder:"What's on your mind?",minLength:1,maxLength:500,required:!0,disabled:s})]}),(0,n.jsx)("hr",{}),(0,n.jsxs)("div",{className:z().post_buttons,children:[(0,n.jsxs)("button",{type:"button",disabled:s,children:[(0,n.jsx)(x.uZU,{size:30}),"Attach a Photo"]}),(0,n.jsxs)("button",{type:"submit",disabled:s,children:[(0,n.jsx)(x.omL,{size:30}),"Post"]})]})]}),e&&e.map(e=>(0,n.jsx)(E,{post:e,setPost:t},e._id))]})}var L=s(6572),A=s.n(L);function B(){let[e,t]=(0,m.useState)([]),{user:s}=(0,d.Eu)();return(0,m.useEffect)(()=>{let e=async()=>{try{let e=await fetch("".concat("http://localhost:9000","/api/user/list"),{headers:{Authorization:"Bearer ".concat(null==s?void 0:s.token)}}),n=await e.json();e.ok&&t(n)}catch(e){e instanceof Error&&console.log(e.message),console.log("Server is starting. Please wait about 20 seconds.")}};s&&e()},[s]),(0,n.jsx)("div",{className:A().friend_list,children:e&&e.map(e=>(0,n.jsxs)("div",{className:A().friend_item,children:[(0,n.jsx)("img",{src:e.profilePicture,alt:"pfp"}),(0,n.jsx)("div",{children:e.name})]},e._id))})}var T=s(1163);function D(){let[e,t]=(0,m.useState)(!1),{user:s,loadPage:o}=(0,d.Eu)(),i=(0,T.useRouter)();return(0,m.useEffect)(()=>{o&&(s?t(!0):i.push("/"))},[s,i,o]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(a(),{children:(0,n.jsx)("title",{children:"Home Page"})}),e&&(0,n.jsx)(v,{children:(0,n.jsxs)("div",{className:g().main_container,children:[(0,n.jsx)(y,{}),(0,n.jsx)(S,{}),(0,n.jsx)(B,{})]})})]})}},6572:function(e){e.exports={friend_list:"friendlist_friend_list__TV8OL",friend_item:"friendlist_friend_item__47XTd"}},6750:function(e){e.exports={header:"header_header__FfSP_",pfp:"header_pfp__IK7Kj",portrait_menu:"header_portrait_menu__rhabr",parent_dropdown:"header_parent_dropdown__YYlvZ",dropdown_active:"header_dropdown_active__x5mpN",dropdown:"header_dropdown__vkcAA",nav_name:"header_nav_name__WkF01",nav_item:"header_nav_item__J8Rkb"}},9615:function(e){e.exports={home:"homeLayout_home__U7tkq",main_container:"homeLayout_main_container__cpqaO"}},3335:function(e){e.exports={post_container:"postcontainer_post_container__GMw8c",create_post:"postcontainer_create_post__ESZwf",post_input:"postcontainer_post_input__JbxIY",pfp:"postcontainer_pfp__2QGKT",post_buttons:"postcontainer_post_buttons__GueZ5",list_post:"postcontainer_list_post__xs2D1",comment_hr:"postcontainer_comment_hr__IxNa1",info:"postcontainer_info__oFRcA",name:"postcontainer_name__PzbFL",photo:"postcontainer_photo__wQe8L",message:"postcontainer_message__6opVK",stats:"postcontainer_stats__zZfy7",like_comment_buttons:"postcontainer_like_comment_buttons___5WUA",unlike_button:"postcontainer_unlike_button__QMVaj",liked_button:"postcontainer_liked_button__Jm94c",delete_confirm:"postcontainer_delete_confirm__5O5LY",comment_button:"postcontainer_comment_button__RS3_O",update_button:"postcontainer_update_button__QPZN8",edit_bar:"postcontainer_edit_bar__mpXBx",post_comment:"postcontainer_post_comment__L3LPq",comment:"postcontainer_comment__2m0AJ",comment_right:"postcontainer_comment_right__qVqPX",date:"postcontainer_date__vDYEw"}},4600:function(e){e.exports={nav:"sidenav_nav__oFl_w",nav_item:"sidenav_nav_item__lIJIq"}}},function(e){e.O(0,[907,415,994,445,348,774,888,179],function(){return e(e.s=7183)}),_N_E=e.O()}]);