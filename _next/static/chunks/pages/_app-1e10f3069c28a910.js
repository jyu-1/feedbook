(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[888],{6840:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/_app",function(){return r(3847)}])},5669:function(e,t,r){"use strict";r.d(t,{Eu:function(){return i},QS:function(){return c},ZP:function(){return u},aU:function(){return l},f0:function(){return f}});var n=r(5893),o=r(7294);let s=(0,o.createContext)(null),a=(e,t)=>{switch(t.type){case"LOGIN":return{user:t.payload};case"LOGOUT":return{user:null};default:return e}};function u(e){let{children:t}=e,[r,u]=(0,o.useReducer)(a,{user:null}),[i,c]=(0,o.useState)(!1);return(0,o.useEffect)(()=>{let e=async()=>{let e=localStorage.getItem("user");if(e){let t=await JSON.parse(e);u({type:"LOGIN",payload:t})}c(!0)};e()},[]),(0,n.jsx)(s.Provider,{value:{...r,dispatch:u,loadPage:i},children:t})}let i=()=>{let e=(0,o.useContext)(s);if(!e)throw Error("useAuthContext must be used inside the Auth Provider");return e},c=()=>{let[e,t]=(0,o.useState)(null),[r,n]=(0,o.useState)(!1),{dispatch:s}=i(),a=async(e,r,o)=>{n(!0),t(null);try{t("Server is starting. Please wait about 20 seconds.");let a=await fetch("".concat("https://feedbook.onrender.com","/api/user/signup"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:r,name:o})}),u=await a.json();a.ok||(n(!1),t(u.error)),a.ok&&(localStorage.setItem("user",JSON.stringify(u)),s({type:"LOGIN",payload:u}),n(!1))}catch(e){e instanceof Error&&console.log(e.message),t("Server is starting. Please wait about 20 seconds."),n(!1)}};return{signup:a,isLoading:r,error:e}},l=()=>{let{dispatch:e}=i(),t=()=>{localStorage.removeItem("user"),e({type:"LOGOUT"})};return{logout:t}},f=()=>{let[e,t]=(0,o.useState)(null),[r,n]=(0,o.useState)(!1),{dispatch:s}=i(),a=async(e,r)=>{n(!0),t(null);try{t("Server is starting. Please wait about 20 seconds.");let o=await fetch("".concat("https://feedbook.onrender.com","/api/user/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:r})}),a=await o.json();o.ok||(n(!1),t(a.error)),o.ok&&(localStorage.setItem("user",JSON.stringify(a)),s({type:"LOGIN",payload:a}),n(!1))}catch(e){e instanceof Error&&console.log(e.message),t("Server is starting. Please wait about 20 seconds."),n(!1)}},u=async()=>{n(!0),t(null);try{t("Server is starting. Please wait about 20 seconds.");let e=await fetch("".concat("https://feedbook.onrender.com","/api/user/guest"),{method:"POST"}),r=await e.json();e.ok||(n(!1),t(r.error)),e.ok&&(localStorage.setItem("user",JSON.stringify(r)),s({type:"LOGIN",payload:r}),n(!1))}catch(e){e instanceof Error&&console.log(e.message),t("Server is starting. Please wait about 20 seconds."),n(!1)}};return{login:a,guestLogin:u,isLoading:r,error:e}}},3847:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return s}});var n=r(5893);r(6738);var o=r(5669);function s(e){let{Component:t,pageProps:r}=e;return(0,n.jsx)(o.ZP,{children:(0,n.jsx)(t,{...r})})}},6738:function(){}},function(e){var t=function(t){return e(e.s=t)};e.O(0,[774,179],function(){return t(6840),t(880)}),_N_E=e.O()}]);