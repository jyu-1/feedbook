(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[888],{6840:function(t,e,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/_app",function(){return r(3847)}])},5669:function(t,e,r){"use strict";r.d(e,{Eu:function(){return l},QS:function(){return i},ZP:function(){return u},aU:function(){return c},f0:function(){return f}});var n=r(5893),o=r(7294);let a=(0,o.createContext)(null),s=(t,e)=>{switch(e.type){case"LOGIN":return{user:e.payload};case"LOGOUT":return{user:null};default:return t}};function u(t){let{children:e}=t,[r,u]=(0,o.useReducer)(s,{user:null}),[l,i]=(0,o.useState)(!1);return(0,o.useEffect)(()=>{let t=async()=>{let t=localStorage.getItem("user");if(t){let e=await JSON.parse(t);u({type:"LOGIN",payload:e})}i(!0)};t()},[]),(0,n.jsx)(a.Provider,{value:{...r,dispatch:u,loadPage:l},children:e})}let l=()=>{let t=(0,o.useContext)(a);if(!t)throw Error("useAuthContext must be used inside the Auth Provider");return t},i=()=>{let[t,e]=(0,o.useState)(null),[r,n]=(0,o.useState)(!1),{dispatch:a}=l(),s=async(t,r,o)=>{n(!0),e(null);try{let s=await fetch("".concat("http://localhost:9000","/api/user/signup"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,password:r,name:o})}),u=await s.json();s.ok||(n(!1),e(u.error)),s.ok&&(localStorage.setItem("user",JSON.stringify(u)),a({type:"LOGIN",payload:u}),n(!1))}catch(t){t instanceof Error&&console.log(t.message),e("Server is starting. Please wait about 20 seconds."),n(!1)}};return{signup:s,isLoading:r,error:t}},c=()=>{let{dispatch:t}=l(),e=()=>{localStorage.removeItem("user"),t({type:"LOGOUT"})};return{logout:e}},f=()=>{let[t,e]=(0,o.useState)(null),[r,n]=(0,o.useState)(!1),{dispatch:a}=l(),s=async(t,r)=>{n(!0),e(null);try{let o=await fetch("".concat("http://localhost:9000","/api/user/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,password:r})}),s=await o.json();o.ok||(n(!1),e(s.error)),o.ok&&(localStorage.setItem("user",JSON.stringify(s)),a({type:"LOGIN",payload:s}),n(!1))}catch(t){t instanceof Error&&console.log(t.message),e("Server is starting. Please wait about 20 seconds."),n(!1)}},u=async()=>{n(!0),e(null);try{let t=await fetch("".concat("http://localhost:9000","/api/user/guest"),{method:"POST"}),r=await t.json();t.ok||(n(!1),e(r.error)),t.ok&&(localStorage.setItem("user",JSON.stringify(r)),a({type:"LOGIN",payload:r}),n(!1))}catch(t){t instanceof Error&&console.log(t.message),e("Server is starting. Please wait about 20 seconds."),n(!1)}};return{login:s,guestLogin:u,isLoading:r,error:t}}},3847:function(t,e,r){"use strict";r.r(e),r.d(e,{default:function(){return a}});var n=r(5893);r(6738);var o=r(5669);function a(t){let{Component:e,pageProps:r}=t;return(0,n.jsx)(o.ZP,{children:(0,n.jsx)(e,{...r})})}},6738:function(){}},function(t){var e=function(e){return t(t.s=e)};t.O(0,[774,179],function(){return e(6840),e(880)}),_N_E=t.O()}]);